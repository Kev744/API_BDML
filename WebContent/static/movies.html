<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Movies</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <header>
            <nav>
                <ul>
                    <li><a href="movies.html">Home</a></li>
                    <li><a href="create_movie.html">Create Movie</a></li>
                    <li><a href="search_city.html">Search City</a></li>
                    <li><a href="search_movie.html">Search Movie</a></li>
                    <li><a href="login.html">LogIn</a></li>
                    <li><a href="signup.html">SignUp</a></li>
                    <li><form id="form1" action="../logout" method="POST">
                        <a href="javascript:;" onclick="document.getElementById('form1').submit();">Logout</a>
                        <input type="hidden" name="mess" value=LogOut/>
                    </form></li>
                </ul>
            </nav>
        </header>
        <h1>Movies</h1>
        <div id="searchResults">
            <table>
                <script>
                    const searchResults = document.getElementById('searchResults');

                    fetch('http://localhost:8080/rest.todo/movies')
                        .then(response => response.json())
                        .then(films => {
                            searchResults.innerHTML = '';

                            films.forEach(film => {
                                const filmInfo = document.createElement('div');
                                filmInfo.innerHTML = `
                                    <tr><td>${film.title}</td></tr>
                                  `;

                                searchResults.appendChild(filmInfo);
                            });
                        })
                        .catch(error => {
                            console.log('Une erreur s\'est produite lors de la récupération des films:', error);
                        });
                </script>
            </table>
        </div>
    </body>
</html>